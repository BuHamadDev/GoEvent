<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Makes the page responsive on mobile devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Book Now - GoEvent</title>

  <!-- Bootstrap CSS for styling -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous">

  <!-- Bootstrap JS bundle (includes Popper.js for dropdowns, modals, etc.) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"></script>
</head>
<body>
 
<!-- Navigation bar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container">
    <!-- Logo -->
    <a class="navbar-brand" href="index.html">
      <img src="images/GoEventLogo.jpg" alt="Uniform Logo" width="50">
    </a>
    <!-- Hamburger menu for mobile -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <!-- Navigation links -->
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <!-- Each <li> is a nav item -->
        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="Create.html">Create Event</a></li>
        <li class="nav-item"><a class="nav-link active" href="BookNow.html">Book Now</a></li>
        <li class="nav-item"><a class="nav-link" href="bookForm.html">Book Form</a></li>
        <li class="nav-item"><a class="nav-link" href="Venues.html">Venues</a></li>
        <li class="nav-item"><a class="nav-link" href="About.html">About</a></li>
        <li class="nav-item"><a class="nav-link" href="ContactUs.html">Contact Us</a></li>
        <li class="nav-item"><a class="nav-link" href="news.html">News</a></li>
        <li class="nav-item"><a class="nav-link" href="news.html">News</a></li>
        <li class="nav-item"><a class="nav-link" href="billCalculator.html">Calculator</a></li>
        <li class="nav-item"><a class="nav-link" href="funpage.html">Fun Page</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Main content -->
<div class="container my-5">
  <h1 class="mb-3">Book Your Event Tickets</h1>
  <p class="mb-4">Select an event below and reserve your spot instantly.</p>

  <!-- Dynamic table: rows will be added by JavaScript -->
  <table id="eventTable" class="table table-striped table-bordered align-middle">
    <thead class="table-primary">
      <tr>
        <th>Image</th>
        <th>Event</th>
        <th>Category</th>
        <th>Date</th>
        <th>Time</th>
        <th>Venue</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- Form to add new events -->
  <h3 class="mt-5">Add New Event</h3>
  <form onsubmit="addEvent(); return false;" class="row g-2">
    <!-- Each input field collects event details -->
    <div class="col-md-4"><input type="text" id="eventName" class="form-control" placeholder="Event Name" required></div>
    <div class="col-md-4"><input type="text" id="eventCategory" class="form-control" placeholder="Category" required></div>
    <div class="col-md-4"><input type="text" id="eventDate" class="form-control" placeholder="Date" required></div>
    <div class="col-md-4"><input type="text" id="eventTime" class="form-control" placeholder="Time" required></div>
    <div class="col-md-4"><input type="text" id="eventVenue" class="form-control" placeholder="Venue" required></div>
    <div class="col-md-4"><button type="submit" class="btn btn-success w-100">Add Event</button></div>
  </form>

  <!-- Form to search events -->
  <h3 class="mt-5">Search Events</h3>
  <form onsubmit="searchEvent(); return false;" class="d-flex gap-2">
    <input type="text" id="searchQuery" class="form-control" placeholder="Search by name or category">
    <button type="submit" class="btn btn-info">Search</button>
  </form>
</div>

<!-- Booking confirmation modal -->
<div class="modal fade" id="bookModal" tabindex="-1" aria-labelledby="bookModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <!-- Modal header -->
      <div class="modal-header">
        <h5 class="modal-title" id="bookModalLabel">Booking Confirmation</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <!-- Modal body -->
      <div class="modal-body">
        Your booking request has been received! We’ll send you a confirmation email shortly.
      </div>
      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-success">Okay</button>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="bg-primary text-white text-center py-3 mt-5">
  <p class="mb-0">&copy; 2025 GoEvent. All rights reserved.</p>
  <p class="mb-0">Discover. Join. Connect.</p>
</footer>

<script>
  
  // -----------------------------
  // Define an Event object type
  // -----------------------------
  function Event(image, name, category, date, time, venue, link) {
    this.image = image;     // path to event image
    this.name = name;       // event name
    this.category = category; // category (e.g., Technology, Conference)
    this.date = date;       // event date
    this.time = time;       // event time
    this.venue = venue;     // event venue
    this.link = link;       // link to event details page
  }

  // -----------------------------
  // Initialize array with 2 events
  // -----------------------------
  let events = [
    new Event("images/ComputerLab.jfif", "Web Development Workshop", "Technology", "Nov 20", "10:00 AM", "SQU CS Building", "event-details.html"),
    new Event("images/conventionImage.jpg", "Tech Innovators Conference 2025", "Technology / Conference", "Nov 15", "9:00 AM – 5:00 PM", "Muscat Convention Center", "event-details.html")
  ];

  // -----------------------------
  // Function to display events in table
  // -----------------------------
  function displayEvents(list = events) {
    let tableBody = document.querySelector("#eventTable tbody");
    tableBody.innerHTML = ""; // clear previous rows

    // Loop through each event object and create a table row
    list.forEach(e => {
      let row = `
        <tr>
          <td><img src="${e.image}" alt="${e.name}" class="img-fluid rounded" style="max-width:200px;"></td>
          <td>${e.name}</td>
          <td>${e.category}</td>
          <td>${e.date}</td>
          <td>${e.time}</td>
          <td>${e.venue}</td>
          <td>
            <!-- Book button triggers the modal -->
            <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#bookModal">
              Book
            </button>
          </td>
        </tr>
      `;
      tableBody.innerHTML += row; // add row to table body
    });
  }

  // -----------------------------
  // Function to add a new event
  // -----------------------------
  function addEvent() {
    // Get values from form inputs
    let name = document.getElementById("eventName").value;
    let category = document.getElementById("eventCategory").value;
    let date = document.getElementById("eventDate").value;
    let time = document.getElementById("eventTime").value;
    let venue = document.getElementById("eventVenue").value;

    // Add the new event into the array
    events.push(new Event("images/default.jpg", name, category, date, time, venue, "event-details.html"));

    // Refresh the table to show the updated list
    displayEvents();
  }

  // -----------------------------
  // Function to search events
  // -----------------------------
  function searchEvent() {
    // Get the search query from the input field
    let query = document.getElementById("searchQuery").value.toLowerCase();

    // Filter events by name or category
    let results = events.filter(e => 
      e.name.toLowerCase().includes(query) || 
      e.category.toLowerCase().includes(query)
    );

    // Display only the matching results
    displayEvents(results);
  }

  // -----------------------------
  // Show first two events on page load
  // -----------------------------
  window.onload = () => {
    // Display only the first two events initially
    displayEvents(events.slice(0,2));
  };
  
</script>

</body>
</html>




